# Хороший Учебный Язык (ХУЯ)

*Если Вам не нравится имя языка, можете опустить букву Х, и называть его просто Учебным Языком. Но знайте — в таком случае язык уже не будет «Хорошим»! ;)*

## Быстрый Старт

Вам потребуется установить компилятор [Rust](https://www.rust-lang.org/).

```console
$ rustc ./исходники/хуяк.rs
```

### Компиляция в Исполняемый Файл

На данный момент поддерживается только платформа Linux x86_64.

```console
$ ./хуяк комп ./примеры/01-привет.хуя
$ ./примеры/01-привет
```

Для других платформ можно попробовать Интерпретацию.

### Интерпретация

Интерпретация просто опускает стадию генерации машинного кода из промежуточного представления (ПП) и тупо интерпретирует ПП. По идее, это должно быть кроссплатформенным, но я не гарантирую, что не добавлю что-нибудь платформо-зависимое в ПП в будущем.

```console
$ ./хуяк интер ./примеры/01-привет.хуя
```

## Модель Абстрактной Машины

Программы данного языка исполняются на некой абстрактной машине, в которую входят

- Память адресуемая побайтово;
- Стек адресуемый по 8 байт (64-битное слово), и располагающийся где-то в Памяти;
- Неявный регистр, хранящий адрес на вершину стека;
- Неявный регистр, хранящий адрес на начало кадра стека;
- Отдельная от Памяти область, где располагаются Инструкции программы;
- Неявный регистр, хранящий индекс текущей исполняемой Инструкции программы.

Инструкции включают в себя операции манипуляции памяти, стека и потока исполнения. Список инструкций на данный момент еще не устоялся, поэтому не будет здесь приведен. Текущий список можно найти в модуле [./исходники/компиляция.rs](./исходники/компилятор.rs).

## Источники

- Wikipedia - Учебный алгоритмический язык - https://ru.wikipedia.org/wiki/Учебный_алгоритмический_язык - проект по-большей части вдохновлён, но не основан на Учебном Алгоритмическом Языке Андрея Петровича Ершова.
- Tsoding - Porth - https://gitlab.com/tsoding/porth (анг.) - очень много идей реализации были разработаны и опробованны мною еще в Porth.
- https://defuse.ca/online-x86-assembler.htm (анг.) - очень полезный ресурс, чтобы быстро сгенерировать машинный код какой-нибудь комманды интелевского ассемблера x86. Активно использовался при реализации [./исходники/эльф.rs](./исходники/эльф.rs).
- https://flatassembler.net/ (анг.) - простой ассемблер способный генерировать минималистичные статические исполняемые файлы. Вывод данного ассембрера был взят за основнову для генерации ELF файлов при реализации [./исходники/эльф.rs](./исходники/эльф.rs).
- Félix Cloutier - x86 and amd64 instruction reference - https://www.felixcloutier.com/x86/ (анг.) - онлайн справочник по инструкциям процессора Intel x86.
- x0nu11byt3 - ELF Format Cheatsheet - https://gist.github.com/x0nu11byt3/bcb35c3de461e5fb66173071a2379779 (анг.) - шпаргалка по бинарному формату исполняемых файлов ELF. Активно использовалася при реализации [./исходники/эльф.rs](./исходники/эльф.rs)
- ChromiumOS - Linux System Call Table - https://chromium.googlesource.com/chromiumos/docs/+/HEAD/constants/syscalls.md (анг.) - Таблица системных вызовов операционной системы Linux
