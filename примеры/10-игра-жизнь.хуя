вкл прелюдия;

конст ВЫСОТА = 10;
конст ШИРИНА = 20;

пер поле: массив(ВЫСОТА, массив(ШИРИНА, нат));
пер скрытое_поле: массив(ВЫСОТА, массив(ШИРИНА, нат));

про инициализировать_поле() нч
    для пер строка := 1..ВЫСОТА то
        для пер столбец := 1..ШИРИНА то
            поле(строка - 1)(столбец - 1) := 0нат;
    поле(0)(1) := 1нат;
    поле(1)(2) := 1нат;
    поле(2)(0) := 1нат;
    поле(2)(1) := 1нат;
    поле(2)(2) := 1нат;
кц

про отобразить_поле() нч
    для пер строка := 1..ВЫСОТА нч
        для пер столбец := 1..ШИРИНА нч
            если поле(строка - 1)(столбец - 1) == 0нат
            то печать(«_»);
            иначе то печать(«%»);
        кц
        печать(«\н»);
    кц
кц

про подсчитать_соседей(строка: цел, столбец: цел): цел нч
    // СДЕЛАТЬ: подсчёт соседей
    вернуть 0;
кц

про следующее_поле() нч
    для пер строка := 1..ВЫСОТА то
        для пер столбец := 1..ШИРИНА нч
            пер соседи: цел = подсчитать_соседей(строка - 1, столбец - 1);
            если поле(строка - 1)(столбец - 1) == 0нат
            то поле(строка - 1)(столбец - 1) := (соседи == 3) как нат;
            иначе то поле(строка - 1)(столбец - 1) := (соседи == 2 или соседи == 3) как нат;
        кц
кц

про перевернуть_поле() нч
    для пер строка := 1..ВЫСОТА то
        для пер столбец := 1..ШИРИНА то
            поле(строка - 1)(столбец - 1) := скрытое_поле(строка - 1)(столбец - 1);
кц

про главная() нч
    инициализировать_поле();
    отобразить_поле();

    следующее_поле();
    перевернуть_поле();
    печать(«\н»);
    отобразить_поле();
кц
